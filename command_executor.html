<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Command Executor &mdash; pubtools-quay 0.10.2 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Container image pusher" href="container_image_pusher.html" />
    <link rel="prev" title="Modules reference" href="modules_reference.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> pubtools-quay
          </a>
              <div class="version">
                0.10.2
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="README.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="entrypoints_reference.html">Entrypoints reference</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="modules_reference.html">Modules reference</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Command Executor</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#base-class">Base class</a></li>
<li class="toctree-l3"><a class="reference internal" href="#children-classes">Children classes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="container_image_pusher.html">Container image pusher</a></li>
<li class="toctree-l2"><a class="reference internal" href="iib_operations.html">IIB operations</a></li>
<li class="toctree-l2"><a class="reference internal" href="image_untagger.html">Image untagger</a></li>
<li class="toctree-l2"><a class="reference internal" href="manifest_list_merger.html">Manifest list merger</a></li>
<li class="toctree-l2"><a class="reference internal" href="operator_pusher.html">Operator Pusher</a></li>
<li class="toctree-l2"><a class="reference internal" href="push_docker.html">Push Docker</a></li>
<li class="toctree-l2"><a class="reference internal" href="quay_api_client.html">Quay API Client</a></li>
<li class="toctree-l2"><a class="reference internal" href="quay_client.html">Quay Client</a></li>
<li class="toctree-l2"><a class="reference internal" href="quay_session.html">Quay Session</a></li>
<li class="toctree-l2"><a class="reference internal" href="signature_handler.html">Signature Handler</a></li>
<li class="toctree-l2"><a class="reference internal" href="signature_remover.html">Signature Remover</a></li>
<li class="toctree-l2"><a class="reference internal" href="tag_docker.html">Tag Docker</a></li>
<li class="toctree-l2"><a class="reference internal" href="utilities.html">Utilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="exceptions.html">Exceptions</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="CHANGELOG.html">ChangeLog</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">pubtools-quay</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="modules_reference.html">Modules reference</a> &raquo;</li>
      <li>Command Executor</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/command_executor.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="module-pubtools._quay.command_executor">
<span id="command-executor"></span><h1>Command Executor<a class="headerlink" href="#module-pubtools._quay.command_executor" title="Permalink to this heading"></a></h1>
<p>Classes used for executing shell commands. Main class Executor contains a concrete implementation of various shell commands that are used throughout pubtools-quay. The logic of a command execution is not implemented in this class. The children classes (LocalExecutor, RemoteExecutor) contain the logic for generic command execution based on the environment type (remote or local). New classes may be implemented if a new execution style is required.</p>
<div class="section" id="base-class">
<h2>Base class<a class="headerlink" href="#base-class" title="Permalink to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="pubtools._quay.command_executor.Executor">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pubtools._quay.command_executor.</span></span><span class="sig-name descname"><span class="pre">Executor</span></span><a class="reference internal" href="_modules/pubtools/_quay/command_executor.html#Executor"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pubtools._quay.command_executor.Executor" title="Permalink to this definition"></a></dt>
<dd><p>Base executor class.</p>
<p>Implementation of command execution should be done in
descendant classes. Common pre- and post-processing should be
implemented in this class.</p>
<dl class="py method">
<dt class="sig sig-object py" id="pubtools._quay.command_executor.Executor.__enter__">
<span class="sig-name descname"><span class="pre">__enter__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pubtools/_quay/command_executor.html#Executor.__enter__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pubtools._quay.command_executor.Executor.__enter__" title="Permalink to this definition"></a></dt>
<dd><p>Use the class as context manager. Returns instance upon invocation.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pubtools._quay.command_executor.Executor.__exit__">
<span class="sig-name descname"><span class="pre">__exit__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">exc_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exc_value</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exc_tb</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pubtools/_quay/command_executor.html#Executor.__exit__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pubtools._quay.command_executor.Executor.__exit__" title="Permalink to this definition"></a></dt>
<dd><p>Cleanup when used as context manager. No-op by default.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pubtools._quay.command_executor.Executor.skopeo_login">
<span class="sig-name descname"><span class="pre">skopeo_login</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">host</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'quay.io'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">username</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">password</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pubtools/_quay/command_executor.html#Executor.skopeo_login"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pubtools._quay.command_executor.Executor.skopeo_login" title="Permalink to this definition"></a></dt>
<dd><p>Attempt to login to Quay if no login credentials are present.</p>
<dl class="simple">
<dt>Args:</dt><dd><dl class="simple">
<dt>host (str):</dt><dd><p>docker registry host (quay.io as default)</p>
</dd>
<dt>username (str):</dt><dd><p>Username for login.</p>
</dd>
<dt>password (str):</dt><dd><p>Password for login.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pubtools._quay.command_executor.Executor.tag_images">
<span class="sig-name descname"><span class="pre">tag_images</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source_ref</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dest_refs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">all_arch</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pubtools/_quay/command_executor.html#Executor.tag_images"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pubtools._quay.command_executor.Executor.tag_images" title="Permalink to this definition"></a></dt>
<dd><p>Copy image from source to destination(s) using skopeo.</p>
<dl class="simple">
<dt>Args:</dt><dd><dl class="simple">
<dt>source_ref (str):</dt><dd><p>Reference of the source image.</p>
</dd>
<dt>dest_refs ([str]):</dt><dd><p>List of target references to copy the image to.</p>
</dd>
<dt>all_arch (bool):</dt><dd><p>Whether to copy all architectures (if multiarch image)</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pubtools._quay.command_executor.Executor.skopeo_inspect">
<span class="sig-name descname"><span class="pre">skopeo_inspect</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image_ref</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">raw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pubtools/_quay/command_executor.html#Executor.skopeo_inspect"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pubtools._quay.command_executor.Executor.skopeo_inspect" title="Permalink to this definition"></a></dt>
<dd><p>Run skopeo inspect and return the result.</p>
<p>NOTE: inspect command will not be run with the –raw argument. This option only returns an
image manifest, which can be gathered by QuayClient. ‘raw’ argument in this function
denotes if the result should be parsed or returned raw.</p>
<dl class="simple">
<dt>Args:</dt><dd><dl class="simple">
<dt>image_ref (str):</dt><dd><p>Image reference to inspect.</p>
</dd>
<dt>raw (bool):</dt><dd><p>Whether to parse the returned JSON, or return raw.</p>
</dd>
</dl>
</dd>
<dt>Returns (dict|str):</dt><dd><p>Result of skopeo inspect.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="children-classes">
<h2>Children classes<a class="headerlink" href="#children-classes" title="Permalink to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="pubtools._quay.command_executor.LocalExecutor">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pubtools._quay.command_executor.</span></span><span class="sig-name descname"><span class="pre">LocalExecutor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{}</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pubtools/_quay/command_executor.html#LocalExecutor"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pubtools._quay.command_executor.LocalExecutor" title="Permalink to this definition"></a></dt>
<dd><p>Run commands locally.</p>
<dl class="py method">
<dt class="sig sig-object py" id="pubtools._quay.command_executor.LocalExecutor.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{}</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pubtools/_quay/command_executor.html#LocalExecutor.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pubtools._quay.command_executor.LocalExecutor.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Initialize.</p>
<dl class="simple">
<dt>Args:</dt><dd><dl class="simple">
<dt>params (dict):</dt><dd><p>Custom parameters to be applied when running the shell commands.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pubtools._quay.command_executor.LocalExecutor._run_cmd">
<span class="sig-name descname"><span class="pre">_run_cmd</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cmd</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">err_msg</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tolerate_err</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stdin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pubtools/_quay/command_executor.html#LocalExecutor._run_cmd"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pubtools._quay.command_executor.LocalExecutor._run_cmd" title="Permalink to this definition"></a></dt>
<dd><p>Run a command locally.</p>
<dl class="simple">
<dt>Args:</dt><dd><dl class="simple">
<dt>cmd (str):</dt><dd><p>Shell command to be executed.</p>
</dd>
<dt>error_msg (str):</dt><dd><p>Error message written when the command fails.</p>
</dd>
<dt>tolerate_err (bool):</dt><dd><p>Whether to tolerate a failed command.</p>
</dd>
<dt>stdin (str):</dt><dd><p>String to send to standard input for a command.</p>
</dd>
</dl>
</dd>
<dt>Returns (str, str):</dt><dd><p>Tuple of stdout and stderr generated by the command.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pubtools._quay.command_executor.RemoteExecutor">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pubtools._quay.command_executor.</span></span><span class="sig-name descname"><span class="pre">RemoteExecutor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">hostname</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">username</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key_filename</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">password</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">port</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">accept_unknown_host</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pubtools/_quay/command_executor.html#RemoteExecutor"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pubtools._quay.command_executor.RemoteExecutor" title="Permalink to this definition"></a></dt>
<dd><p>Run commands remotely via SSH.</p>
<dl class="py method">
<dt class="sig sig-object py" id="pubtools._quay.command_executor.RemoteExecutor.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">hostname</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">username</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key_filename</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">password</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">port</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">accept_unknown_host</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pubtools/_quay/command_executor.html#RemoteExecutor.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pubtools._quay.command_executor.RemoteExecutor.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Initialize.</p>
<dl class="simple">
<dt>Args:</dt><dd><dl class="simple">
<dt>hostname (str):</dt><dd><p>Host to connect to.</p>
</dd>
<dt>username (str):</dt><dd><p>Username to authenticate as. Defaults to local username.</p>
</dd>
<dt>key_filename (str):</dt><dd><p>Path to a private key for authentication. Default location will be used if omitted.</p>
</dd>
<dt>password (str):</dt><dd><p>Password for ssh authentication. Has lower precedence than private key.</p>
</dd>
<dt>port (int):</dt><dd><p>Optional port of the host.</p>
</dd>
<dt>accept_unknown_host (bool):</dt><dd><p>Whether to accept an unknown host key. Defaults to True.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pubtools._quay.command_executor.RemoteExecutor._run_cmd">
<span class="sig-name descname"><span class="pre">_run_cmd</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cmd</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">err_msg</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tolerate_err</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stdin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pubtools/_quay/command_executor.html#RemoteExecutor._run_cmd"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pubtools._quay.command_executor.RemoteExecutor._run_cmd" title="Permalink to this definition"></a></dt>
<dd><p>Run a command remotely via SSH.</p>
<dl class="simple">
<dt>Args:</dt><dd><dl class="simple">
<dt>cmd (str):</dt><dd><p>Shell command to be executed.</p>
</dd>
<dt>error_msg (str):</dt><dd><p>Error message written when the command fails.</p>
</dd>
<dt>tolerate_err (bool):</dt><dd><p>Whether to tolerate a failed command.</p>
</dd>
<dt>stdin (str):</dt><dd><p>String to send to standard input for a command.</p>
</dd>
</dl>
</dd>
<dt>Returns (str, str):</dt><dd><p>Tuple of stdout and stderr generated by the command.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pubtools._quay.command_executor.ContainerExecutor">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">pubtools._quay.command_executor.</span></span><span class="sig-name descname"><span class="pre">ContainerExecutor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">base_url</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'unix://var/run/docker.sock'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verify_tls</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cert_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">registry_username</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">registry_password</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pubtools/_quay/command_executor.html#ContainerExecutor"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pubtools._quay.command_executor.ContainerExecutor" title="Permalink to this definition"></a></dt>
<dd><p>Run commands in a Docker container.</p>
<dl class="py method">
<dt class="sig sig-object py" id="pubtools._quay.command_executor.ContainerExecutor.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">base_url</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'unix://var/run/docker.sock'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verify_tls</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cert_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">registry_username</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">registry_password</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pubtools/_quay/command_executor.html#ContainerExecutor.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pubtools._quay.command_executor.ContainerExecutor.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Initialize.</p>
<dl class="simple">
<dt>Args:</dt><dd><dl class="simple">
<dt>image (str):</dt><dd><p>Path to an image which will be used for performing skopeo operations. Must be
downloadable by Docker.</p>
</dd>
<dt>base_url (str):</dt><dd><p>Base URL of the Docker client.</p>
</dd>
<dt>timeout (int):</dt><dd><p>Default timeout for API calls, in seconds.</p>
</dd>
<dt>verify_tls (bool):</dt><dd><p>Whether to use TLS verification.</p>
</dd>
<dt>cert_path (str|None):</dt><dd><p>Custom path to TLS certificates. If not specified, ‘~/.docker’ is used.</p>
</dd>
<dt>registry_username (str|None):</dt><dd><p>Username to login to registry containing the specified image. If not provided,
login will be assumed to not be needed.</p>
</dd>
<dt>registry_password (str|None):</dt><dd><p>Password to login to registry containing the specified image. If not provided,
login will be assumed to not be needed.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pubtools._quay.command_executor.ContainerExecutor.__exit__">
<span class="sig-name descname"><span class="pre">__exit__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">exc_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exc_value</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exc_tb</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pubtools/_quay/command_executor.html#ContainerExecutor.__exit__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pubtools._quay.command_executor.ContainerExecutor.__exit__" title="Permalink to this definition"></a></dt>
<dd><p>Cleanup the container when used as a context manager.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pubtools._quay.command_executor.ContainerExecutor._run_cmd">
<span class="sig-name descname"><span class="pre">_run_cmd</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cmd</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">err_msg</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tolerate_err</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stdin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pubtools/_quay/command_executor.html#ContainerExecutor._run_cmd"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pubtools._quay.command_executor.ContainerExecutor._run_cmd" title="Permalink to this definition"></a></dt>
<dd><p>Run a command locally.</p>
<p>NOTE: Older versions of Docker API don’t support demuxing of stdout and stderr.
This means that data from both streams will be mixed together. To maintain compatibility
with the other classes, same output will be returned twice as a tuple. Each string
will contain the same mix of stdout and stderr messages.</p>
<dl class="simple">
<dt>Args:</dt><dd><dl class="simple">
<dt>cmd (str):</dt><dd><p>Shell command to be executed.</p>
</dd>
<dt>error_msg (str):</dt><dd><p>Error message written when the command fails.</p>
</dd>
<dt>tolerate_err (bool):</dt><dd><p>Whether to tolerate a failed command.</p>
</dd>
<dt>stdin (None|str):</dt><dd><p>This parameter exists only for compatibility with parent class. Sending input
to containers is not supported.</p>
</dd>
</dl>
</dd>
<dt>Returns (str, str):</dt><dd><p>Tuple of stdout and stderr generated by the command.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pubtools._quay.command_executor.ContainerExecutor._add_file">
<span class="sig-name descname"><span class="pre">_add_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pubtools/_quay/command_executor.html#ContainerExecutor._add_file"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pubtools._quay.command_executor.ContainerExecutor._add_file" title="Permalink to this definition"></a></dt>
<dd><p>Add a text file to the running container.</p>
<p>The primary use-case is to store a secret which will be accessed from inside the container.
File will be stored in the path /tmp/&lt;file_name&gt;.</p>
<dl class="simple">
<dt>Args:</dt><dd><dl class="simple">
<dt>data (str):</dt><dd><p>Data that should be stored in the container.</p>
</dd>
<dt>file_name (str):</dt><dd><p>Name of the file.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pubtools._quay.command_executor.ContainerExecutor.skopeo_login">
<span class="sig-name descname"><span class="pre">skopeo_login</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">host</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'quay.io'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">username</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">password</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pubtools/_quay/command_executor.html#ContainerExecutor.skopeo_login"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pubtools._quay.command_executor.ContainerExecutor.skopeo_login" title="Permalink to this definition"></a></dt>
<dd><p>Attempt to login to Quay if no login credentials are present.</p>
<p>This method is reimplemented because it uses a different approach to input the password.</p>
<dl class="simple">
<dt>Args:</dt><dd><dl class="simple">
<dt>host (str):</dt><dd><p>docker registry host (quay.io as default)</p>
</dd>
<dt>username (str):</dt><dd><p>Username for login.</p>
</dd>
<dt>password (str):</dt><dd><p>Password for login.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="modules_reference.html" class="btn btn-neutral float-left" title="Modules reference" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="container_image_pusher.html" class="btn btn-neutral float-right" title="Container image pusher" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, Red Hat.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>