From 4fbaee6f83c1247ca2650897f400ba6de0e1ee58 Mon Sep 17 00:00:00 2001
From: Jindrich Luza <jluza@redhat.com>
Date: Mon, 29 Jan 2024 16:43:16 +0100
Subject: [PATCH] Remove duplicates from extract_manifests output

---
 pubtools/_quay/item_processor.py | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/pubtools/_quay/item_processor.py b/pubtools/_quay/item_processor.py
index dd2813d..dcf617b 100644
--- a/pubtools/_quay/item_processor.py
+++ b/pubtools/_quay/item_processor.py
@@ -45,7 +45,7 @@ class SignEntry:
     arch: str
 
 
-@dataclass
+@dataclass(frozen=True)
 class ManifestArchDigest:
     """Data structure to hold information about container manifest."""
 
@@ -186,7 +186,7 @@ class ContentExtractor:
                     results.extend(ret)
                 else:
                     results.append(ret)
-        return results
+        return list(set(results))
 
     def extract_tags(self, repo_ref: str, tolerate_missing: bool = True) -> list[str]:
         """Fetch list of tags for given repo reference.
-- 
2.40.1

